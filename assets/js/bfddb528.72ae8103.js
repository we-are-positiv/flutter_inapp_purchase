"use strict";(self.webpackChunkflutter_inapp_purchase_docs=self.webpackChunkflutter_inapp_purchase_docs||[]).push([[178],{2480:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>a,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"migration/from-v5","title":"Migration Guide","description":"This guide helps you migrate your existing flutterinapppurchase implementation to the latest version.","source":"@site/docs/migration/from-v5.md","sourceDirName":"migration","slug":"/migration/from-v5","permalink":"/docs/migration/from-v5","draft":false,"unlisted":false,"editUrl":"https://github.com/hyochan/flutter_inapp_purchase/tree/main/docs/docs/migration/from-v5.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Migration Guide"},"sidebar":"docsSidebar","previous":{"title":"FAQ","permalink":"/docs/guides/faq"},"next":{"title":"API Reference","permalink":"/docs/api/"}}');var i=r(4848),s=r(8453);const a={sidebar_position:1,title:"Migration Guide"},c="Migration Guide",d={},l=[{value:"Version Support",id:"version-support",level:2},{value:"Migration from v6.3.x to v6.4.0 (Current)",id:"migration-from-v63x-to-v640-current",level:2},{value:"Breaking Changes",id:"breaking-changes",level:3},{value:"Simplified requestProducts API",id:"simplified-requestproducts-api",level:4},{value:"Migration from v5.x to v6.0.0",id:"migration-from-v5x-to-v600",level:2},{value:"Overview",id:"overview",level:3},{value:"Key Changes Summary",id:"key-changes-summary",level:3},{value:"Breaking Changes",id:"breaking-changes-1",level:3},{value:"1. Error Code Enum Changes (CRITICAL)",id:"1-error-code-enum-changes-critical",level:4},{value:"2. Method Return Types",id:"2-method-return-types",level:3},{value:"3. Stream Names",id:"3-stream-names",level:3},{value:"Step-by-Step Migration",id:"step-by-step-migration",level:2},{value:"Step 1: Update Dependencies",id:"step-1-update-dependencies",level:3},{value:"Step 2: Enable Null Safety",id:"step-2-enable-null-safety",level:3},{value:"Step 3: Update Initialization",id:"step-3-update-initialization",level:3},{value:"Step 4: Update Stream Listeners",id:"step-4-update-stream-listeners",level:3},{value:"Step 5: Update Purchase Methods",id:"step-5-update-purchase-methods",level:3},{value:"Step 6: Update Data Model Access",id:"step-6-update-data-model-access",level:3},{value:"Step 7: Update Transaction Completion",id:"step-7-update-transaction-completion",level:3},{value:"Complete Migration Example",id:"complete-migration-example",level:2},{value:"Before (v5.x)",id:"before-v5x",level:3},{value:"After (v6.x)",id:"after-v6x",level:3},{value:"Testing Your Migration",id:"testing-your-migration",level:2},{value:"Benefits of v6.x",id:"benefits-of-v6x",level:2},{value:"Need Help?",id:"need-help",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"migration-guide",children:"Migration Guide"})}),"\n",(0,i.jsx)(n.p,{children:"This guide helps you migrate your existing flutter_inapp_purchase implementation to the latest version."}),"\n",(0,i.jsx)(n.h2,{id:"version-support",children:"Version Support"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"v6.4.0"})," (Current) - Latest version with simplified APIs"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"v6.3.x"})," - Previous stable version with deprecated APIs still available"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"migration-from-v63x-to-v640-current",children:"Migration from v6.3.x to v6.4.0 (Current)"}),"\n",(0,i.jsx)(n.h3,{id:"breaking-changes",children:"Breaking Changes"}),"\n",(0,i.jsx)(n.h4,{id:"simplified-requestproducts-api",children:"Simplified requestProducts API"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"requestProducts"})," method now accepts direct parameters instead of a wrapper object:"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Before (v6.3.x):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"final products = await iap.requestProducts(\n  RequestProductsParams(\n    productIds: ['product_id'],\n    type: PurchaseType.inapp,\n  ),\n);\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"After (v6.4.0):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"final products = await iap.requestProducts(\n  productIds: ['product_id'],\n  type: PurchaseType.inapp,  // Optional, defaults to PurchaseType.inapp\n);\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"RequestProductsParams"})," class has been removed to simplify the API."]}),"\n",(0,i.jsx)(n.h2,{id:"migration-from-v5x-to-v600",children:"Migration from v5.x to v6.0.0"}),"\n",(0,i.jsx)(n.h3,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(n.p,{children:["Version 6.0.0 is a ",(0,i.jsx)(n.strong,{children:"major release"})," with breaking changes to support modern platform APIs and improve developer experience."]}),"\n",(0,i.jsx)(n.h3,{id:"key-changes-summary",children:"Key Changes Summary"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.strong,{children:"StoreKit 2 Support"})," for iOS 15.0+"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.strong,{children:"Billing Client v8"})," for Android"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.strong,{children:"Improved Error Handling"})," with better error codes"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.strong,{children:"Enhanced Type Safety"})," with refined APIs"]}),"\n",(0,i.jsxs)(n.li,{children:["\u26a0\ufe0f ",(0,i.jsx)(n.strong,{children:"Breaking Changes"})," in error codes and some method signatures"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"breaking-changes-1",children:"Breaking Changes"}),"\n",(0,i.jsx)(n.h4,{id:"1-error-code-enum-changes-critical",children:"1. Error Code Enum Changes (CRITICAL)"}),"\n",(0,i.jsx)(n.p,{children:"The most significant breaking change is the error code enum format."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"v5.x (Old):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"// SCREAMING_SNAKE_CASE format\nErrorCode.E_USER_CANCELLED\nErrorCode.E_NETWORK_ERROR\nErrorCode.E_ITEM_UNAVAILABLE\nErrorCode.E_ALREADY_OWNED\nErrorCode.E_DEVELOPER_ERROR\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"v6.0 (New):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"// lowerCamelCase format\nErrorCode.eUserCancelled\nErrorCode.eNetworkError\nErrorCode.eItemUnavailable\nErrorCode.eAlreadyOwned\nErrorCode.eDeveloperError\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Before (v5.x):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"Future<List<IAPItem>> getProducts(List<String> skus) async\nFuture<String> requestPurchase(String sku) async\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"After (v6.x):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"Future<List<IapItem>> getProducts(List<String> skus) async\nFuture<void> requestPurchase(String sku) async\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-method-return-types",children:"2. Method Return Types"}),"\n",(0,i.jsxs)(n.p,{children:["Several methods now return ",(0,i.jsx)(n.code,{children:"void"})," instead of ",(0,i.jsx)(n.code,{children:"String"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"// Old\nString result = await FlutterInappPurchase.instance.requestPurchase(sku);\n\n// New\nawait FlutterInappPurchase.instance.requestPurchase(sku);\n// Result comes through purchaseUpdated stream\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-stream-names",children:"3. Stream Names"}),"\n",(0,i.jsx)(n.p,{children:"Purchase streams have been renamed for clarity:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Before:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"FlutterInappPurchase.connectionUpdated.listen(...);\nFlutterInappPurchase.iapUpdated.listen(...);\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"After:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"FlutterInappPurchase.purchaseUpdated.listen(...);\nFlutterInappPurchase.purchaseError.listen(...);\n"})}),"\n",(0,i.jsx)(n.h2,{id:"step-by-step-migration",children:"Step-by-Step Migration"}),"\n",(0,i.jsx)(n.h3,{id:"step-1-update-dependencies",children:"Step 1: Update Dependencies"}),"\n",(0,i.jsxs)(n.p,{children:["Update your ",(0,i.jsx)(n.code,{children:"pubspec.yaml"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"dependencies:\n  flutter_inapp_purchase: ^6.4.0 # Updated version\n"})}),"\n",(0,i.jsx)(n.p,{children:"Run:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"flutter pub get\n"})}),"\n",(0,i.jsx)(n.h3,{id:"step-2-enable-null-safety",children:"Step 2: Enable Null Safety"}),"\n",(0,i.jsx)(n.p,{children:"If you haven't already, migrate your project to null safety:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"dart migrate\n"})}),"\n",(0,i.jsx)(n.h3,{id:"step-3-update-initialization",children:"Step 3: Update Initialization"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Before:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"Future<void> initPlatformState() async {\n  try {\n    await FlutterInappPurchase.instance.initConnection();\n    print('IAP connection initialized');\n  } on PlatformException catch (e) {\n    print('Failed to initialize connection: $e');\n  }\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"After:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"Future<void> initPlatformState() async {\n  try {\n    await FlutterInappPurchase.instance.initConnection();\n    print('IAP connection initialized');\n  } catch (e) {\n    print('Failed to initialize IAP: $e');\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"step-4-update-stream-listeners",children:"Step 4: Update Stream Listeners"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Before:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"_purchaseUpdatedSubscription = FlutterInappPurchase.iapUpdated.listen((data) {\n  print('purchase-updated: $data');\n});\n\n_purchaseErrorSubscription = FlutterInappPurchase.iapUpdated.listen((data) {\n  print('purchase-error: $data');\n});\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"After:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"_purchaseUpdatedSubscription = FlutterInappPurchase.purchaseUpdated.listen((productItem) {\n  if (productItem != null) {\n    print('purchase-updated: ${productItem.productId}');\n    _handlePurchaseUpdate(productItem);\n  }\n});\n\n_purchaseErrorSubscription = FlutterInappPurchase.purchaseError.listen((productItem) {\n  print('purchase-error: ${productItem?.productId}');\n  _handlePurchaseError(productItem);\n});\n"})}),"\n",(0,i.jsx)(n.h3,{id:"step-5-update-purchase-methods",children:"Step 5: Update Purchase Methods"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Before:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"try {\n  String msg = await FlutterInappPurchase.instance.requestPurchase(item.productId);\n  print('requestPurchase: $msg');\n} catch (error) {\n  print('requestPurchase error: $error');\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"After:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"try {\n  await FlutterInappPurchase.instance.requestPurchase(item.productId!);\n  // Success/failure will be delivered via streams\n} catch (error) {\n  print('requestPurchase error: $error');\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"step-6-update-data-model-access",children:"Step 6: Update Data Model Access"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Before:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"// Accessing properties without null checks\nString productId = item.productId;\nString price = item.localizedPrice;\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"After:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"// Null-safe property access\nString? productId = item.productId;\nString? price = item.localizedPrice;\n\n// With null coalescing\nString displayPrice = item.localizedPrice ?? 'N/A';\n"})}),"\n",(0,i.jsx)(n.h3,{id:"step-7-update-transaction-completion",children:"Step 7: Update Transaction Completion"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Before:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"try {\n  String msg = await FlutterInappPurchase.instance.finishTransaction(item);\n} catch (err) {\n  print('finishTransaction error: $err');\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"After:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"try {\n  String? result = await FlutterInappPurchase.instance.finishTransaction(item);\n  print('Transaction finished: $result');\n} catch (err) {\n  print('finishTransaction error: $err');\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"complete-migration-example",children:"Complete Migration Example"}),"\n",(0,i.jsx)(n.p,{children:"Here's a complete before/after example:"}),"\n",(0,i.jsx)(n.h3,{id:"before-v5x",children:"Before (v5.x)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"class _MyAppState extends State<MyApp> {\n  StreamSubscription _purchaseUpdatedSubscription;\n  StreamSubscription _purchaseErrorSubscription;\n  List<IAPItem> _items = [];\n  List<PurchasedItem> _purchases = [];\n\n  @override\n  void initState() {\n    super.initState();\n    initPlatformState();\n  }\n\n  Future<void> initPlatformState() async {\n    await FlutterInappPurchase.instance.initConnection();\n\n    _purchaseUpdatedSubscription = FlutterInappPurchase.iapUpdated.listen((data) {\n      print('purchase-updated: $data');\n      setState(() {\n        _purchases.add(data);\n      });\n    });\n\n    _purchaseErrorSubscription = FlutterInappPurchase.iapUpdated.listen((data) {\n      print('purchase-error: $data');\n    });\n\n    _getProduct();\n  }\n\n  void _requestPurchase(IAPItem item) {\n    FlutterInappPurchase.instance.requestPurchase(item.productId);\n  }\n\n  Future _getProduct() async {\n    List<IAPItem> items = await FlutterInappPurchase.instance.requestProducts(skus: _kProductIds, type: 'inapp');\n    setState(() {\n      _items = items;\n    });\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"after-v6x",children:"After (v6.x)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dart",children:"class _MyAppState extends State<MyApp> {\n  StreamSubscription? _purchaseUpdatedSubscription;\n  StreamSubscription? _purchaseErrorSubscription;\n  List<IapItem> _items = [];\n  List<PurchasedItem> _purchases = [];\n\n  @override\n  void initState() {\n    super.initState();\n    initPlatformState();\n  }\n\n  Future<void> initPlatformState() async {\n    try {\n      await FlutterInappPurchase.instance.initConnection();\n      print('IAP connection initialized');\n    } catch (e) {\n      print('Failed to initialize: $e');\n    }\n\n    _purchaseUpdatedSubscription = FlutterInappPurchase\n        .purchaseUpdated.listen((productItem) {\n      if (productItem != null) {\n        print('purchase-updated: ${productItem.productId}');\n        setState(() {\n          _purchases.add(productItem);\n        });\n        // Finish the transaction\n        _finishTransaction(productItem);\n      }\n    });\n\n    _purchaseErrorSubscription = FlutterInappPurchase\n        .purchaseError.listen((productItem) {\n      print('purchase-error: ${productItem?.productId}');\n      // Handle error\n    });\n\n    _getProduct();\n  }\n\n  void _requestPurchase(IapItem item) async {\n    try {\n      await FlutterInappPurchase.instance.requestPurchase(item.productId!);\n    } catch (e) {\n      print('Purchase request failed: $e');\n    }\n  }\n\n  Future<void> _finishTransaction(PurchasedItem item) async {\n    try {\n      await FlutterInappPurchase.instance.finishTransaction(item);\n    } catch (e) {\n      print('Failed to finish transaction: $e');\n    }\n  }\n\n  Future<void> _getProduct() async {\n    try {\n      List<IapItem> items = await FlutterInappPurchase.instance\n          .getProducts(_kProductIds);\n      setState(() {\n        _items = items;\n      });\n    } catch (e) {\n      print('Failed to get products: $e');\n    }\n  }\n\n  @override\n  void dispose() {\n    _purchaseUpdatedSubscription?.cancel();\n    _purchaseErrorSubscription?.cancel();\n    super.dispose();\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"testing-your-migration",children:"Testing Your Migration"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Compile Check:"})," Ensure your code compiles without errors"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Initialize Test:"})," Verify IAP initialization works"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Product Loading:"})," Test product fetching"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Purchase Flow:"})," Test complete purchase flow"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Stream Handling:"})," Verify purchase update streams work"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Transaction Completion:"})," Test finishing transactions"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"benefits-of-v6x",children:"Benefits of v6.x"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Null Safety:"})," Better type safety and fewer runtime errors"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Improved Error Handling:"})," More precise error information"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Better Stream API:"})," Clearer separation of success and error streams"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Updated Dependencies:"})," Latest Android and iOS billing libraries"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Performance Improvements:"})," Optimized native code"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"need-help",children:"Need Help?"}),"\n",(0,i.jsx)(n.p,{children:"If you encounter issues during migration:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Check the ",(0,i.jsx)(n.a,{href:"../troubleshooting",children:"Troubleshooting Guide"})]}),"\n",(0,i.jsxs)(n.li,{children:["Review the ",(0,i.jsx)(n.a,{href:"../api/overview",children:"API Documentation"})]}),"\n",(0,i.jsxs)(n.li,{children:["Look at the ",(0,i.jsx)(n.a,{href:"../examples/basic-store",children:"Examples"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/hyochan/flutter_inapp_purchase/issues",children:"Open an issue"})," on GitHub"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>c});var t=r(6540);const i={},s=t.createContext(i);function a(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);