"use strict";(self.webpackChunkflutter_inapp_purchase_docs=self.webpackChunkflutter_inapp_purchase_docs||[]).push([[7924],{571:(n,e,i)=>{i.d(e,{A:()=>l});var t=i(6540),s=i(4848);function r({className:n="adfit",style:e,unit:i,height:r,width:l}){return(0,t.useEffect)(()=>{const e=setTimeout(()=>{const e=document.querySelector(`.${n}`);if(!e)return void console.warn(`AdFit: Element with class "${n}" not found`);const t=e.querySelectorAll(".kakao_ad_area"),s=e.querySelectorAll('script[src*="kas/static/ba.min.js"]');t.forEach(n=>n.remove()),s.forEach(n=>n.remove());const o=document.createElement("ins"),a=document.createElement("script");o.className="kakao_ad_area",o.style.cssText="display:none; width:100%;",a.async=!0,a.type="text/javascript",a.src="//t1.daumcdn.net/kas/static/ba.min.js",o.setAttribute("data-ad-width",l.toString()),o.setAttribute("data-ad-height",r.toString()),o.setAttribute("data-ad-unit",i),e.appendChild(o),e.appendChild(a)},100);return()=>clearTimeout(e)},[n,i,r,l]),(0,s.jsx)("div",{style:e,children:(0,s.jsx)("div",{className:n})})}function l(){return(0,s.jsx)(r,{unit:"DAN-YTmjDwlbcP42HBg6",height:100,width:320,className:"adfit-top",style:{flex:1,marginTop:24,marginBottom:24}})}},5287:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>d,contentTitle:()=>a,default:()=>p,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"getting-started/installation","title":"Installation & Setup","description":"Learn how to install and configure flutterinapppurchase in your Flutter project.","source":"@site/docs/getting-started/installation.md","sourceDirName":"getting-started","slug":"/getting-started/installation","permalink":"/docs/getting-started/installation","draft":false,"unlisted":false,"editUrl":"https://github.com/hyochan/flutter_inapp_purchase/tree/main/docs/docs/getting-started/installation.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Installation & Setup","sidebar_label":"Installation","sidebar_position":1},"sidebar":"docsSidebar","previous":{"title":"Introduction","permalink":"/docs/intro"},"next":{"title":"iOS Setup","permalink":"/docs/getting-started/ios-setup"}}');var s=i(4848),r=i(8453),l=i(571);const o={title:"Installation & Setup",sidebar_label:"Installation",sidebar_position:1},a="Installation & Setup",d={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Package Installation",id:"package-installation",level:2},{value:"Platform Configuration",id:"platform-configuration",level:2},{value:"iOS Configuration",id:"ios-configuration",level:3},{value:"Enable In-App Purchase Capability",id:"enable-in-app-purchase-capability",level:4},{value:"Configure Info.plist (iOS 14+)",id:"configure-infoplist-ios-14",level:4},{value:"StoreKit Configuration (Optional)",id:"storekit-configuration-optional",level:4},{value:"Android Configuration",id:"android-configuration",level:3},{value:"Update build.gradle",id:"update-buildgradle",level:4},{value:"Enable ProGuard Rules (if using ProGuard)",id:"enable-proguard-rules-if-using-proguard",level:4},{value:"Permissions",id:"permissions",level:4},{value:"Configuration",id:"configuration",level:2},{value:"App Store Connect (iOS)",id:"app-store-connect-ios",level:3},{value:"Google Play Console (Android)",id:"google-play-console-android",level:3},{value:"Verification",id:"verification",level:2},{value:"Initialize the Plugin",id:"initialize-the-plugin",level:3},{value:"Option 1: Create Your Own Instance",id:"option-1-create-your-own-instance",level:4},{value:"Option 2: Use Singleton Instance",id:"option-2-use-singleton-instance",level:4},{value:"Option 3: With Flutter Hooks",id:"option-3-with-flutter-hooks",level:4},{value:"Test Connection",id:"test-connection",level:3},{value:"Next Steps",id:"next-steps",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"iOS Common Issues",id:"ios-common-issues",level:3},{value:"Android Common Issues",id:"android-common-issues",level:3}];function u(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"installation--setup",children:"Installation & Setup"})}),"\n",(0,s.jsx)(l.A,{}),"\n",(0,s.jsx)(e.p,{children:"Learn how to install and configure flutter_inapp_purchase in your Flutter project."}),"\n",(0,s.jsx)(e.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsx)(e.p,{children:"Before installing flutter_inapp_purchase, ensure you have:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Flutter SDK 2.0.0 or higher"}),"\n",(0,s.jsx)(e.li,{children:"Dart SDK 2.12.0 or higher"}),"\n",(0,s.jsx)(e.li,{children:"Active Apple Developer account (for iOS)"}),"\n",(0,s.jsx)(e.li,{children:"Active Google Play Developer account (for Android)"}),"\n",(0,s.jsx)(e.li,{children:"Physical device for testing (simulators/emulators have limited support)"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"package-installation",children:"Package Installation"}),"\n",(0,s.jsx)(e.p,{children:"Add flutter_inapp_purchase to your project:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"flutter pub add flutter_inapp_purchase\n"})}),"\n",(0,s.jsxs)(e.p,{children:["Or add it manually to your ",(0,s.jsx)(e.code,{children:"pubspec.yaml"}),":"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:"dependencies:\n  flutter_inapp_purchase: ^6.4.0\n"})}),"\n",(0,s.jsx)(e.p,{children:"Then run:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"flutter pub get\n"})}),"\n",(0,s.jsx)(e.h2,{id:"platform-configuration",children:"Platform Configuration"}),"\n",(0,s.jsx)(e.h3,{id:"ios-configuration",children:"iOS Configuration"}),"\n",(0,s.jsx)(e.h4,{id:"enable-in-app-purchase-capability",children:"Enable In-App Purchase Capability"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"Open your project in Xcode"}),"\n",(0,s.jsx)(e.li,{children:"Select your project in the navigator"}),"\n",(0,s.jsx)(e.li,{children:"Select your target"}),"\n",(0,s.jsxs)(e.li,{children:["Go to ",(0,s.jsx)(e.strong,{children:"Signing & Capabilities"})," tab"]}),"\n",(0,s.jsxs)(e.li,{children:["Click ",(0,s.jsx)(e.strong,{children:"+ Capability"})," and add ",(0,s.jsx)(e.strong,{children:"In-App Purchase"})]}),"\n"]}),"\n",(0,s.jsx)(e.h4,{id:"configure-infoplist-ios-14",children:"Configure Info.plist (iOS 14+)"}),"\n",(0,s.jsxs)(e.p,{children:["Add the following to your ",(0,s.jsx)(e.code,{children:"ios/Runner/Info.plist"}),":"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-xml",children:"<key>LSApplicationQueriesSchemes</key>\n<array>\n    <string>itms-apps</string>\n</array>\n"})}),"\n",(0,s.jsx)(e.h4,{id:"storekit-configuration-optional",children:"StoreKit Configuration (Optional)"}),"\n",(0,s.jsxs)(e.p,{children:["For testing with StoreKit 2, create a ",(0,s.jsx)(e.code,{children:".storekit"})," configuration file:"]}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["In Xcode, go to ",(0,s.jsx)(e.strong,{children:"File"})," \u2192 ",(0,s.jsx)(e.strong,{children:"New"})," \u2192 ",(0,s.jsx)(e.strong,{children:"File"})]}),"\n",(0,s.jsxs)(e.li,{children:["Choose ",(0,s.jsx)(e.strong,{children:"StoreKit Configuration File"})]}),"\n",(0,s.jsx)(e.li,{children:"Add your products for testing"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"android-configuration",children:"Android Configuration"}),"\n",(0,s.jsx)(e.h4,{id:"update-buildgradle",children:"Update build.gradle"}),"\n",(0,s.jsxs)(e.p,{children:["Ensure your ",(0,s.jsx)(e.code,{children:"android/app/build.gradle"})," has the minimum SDK version:"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-gradle",children:"android {\n    compileSdkVersion 34\n\n    defaultConfig {\n        minSdkVersion 21  // Required minimum\n        targetSdkVersion 34\n    }\n}\n"})}),"\n",(0,s.jsx)(e.h4,{id:"enable-proguard-rules-if-using-proguard",children:"Enable ProGuard Rules (if using ProGuard)"}),"\n",(0,s.jsxs)(e.p,{children:["Add to your ",(0,s.jsx)(e.code,{children:"android/app/proguard-rules.pro"}),":"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-proguard",children:"# In-App Purchase\n-keep class com.amazon.** {*;}\n-keep class dev.hyo.** { *; }\n-keep class com.android.vending.billing.**\n-dontwarn com.amazon.**\n-keepattributes *Annotation*\n"})}),"\n",(0,s.jsx)(e.h4,{id:"permissions",children:"Permissions"}),"\n",(0,s.jsx)(e.p,{children:"The plugin automatically adds the required billing permission to your manifest."}),"\n",(0,s.jsx)(e.h2,{id:"configuration",children:"Configuration"}),"\n",(0,s.jsx)(e.h3,{id:"app-store-connect-ios",children:"App Store Connect (iOS)"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:["Sign in to ",(0,s.jsx)(e.a,{href:"https://appstoreconnect.apple.com",children:"App Store Connect"})]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Select your app"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:["Navigate to ",(0,s.jsx)(e.strong,{children:"Monetization"})," \u2192 ",(0,s.jsx)(e.strong,{children:"In-App Purchases"})]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Create your products:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Consumable"}),": Can be purchased multiple times"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Non-Consumable"}),": One-time purchase"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Auto-Renewable Subscription"}),": Recurring payments"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Non-Renewing Subscription"}),": Fixed duration"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Fill in required fields:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Reference Name (internal use)"}),"\n",(0,s.jsx)(e.li,{children:"Product ID (used in code)"}),"\n",(0,s.jsx)(e.li,{children:"Pricing"}),"\n",(0,s.jsx)(e.li,{children:"Localizations"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Submit for review with your app"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"google-play-console-android",children:"Google Play Console (Android)"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:["Sign in to ",(0,s.jsx)(e.a,{href:"https://play.google.com/console",children:"Google Play Console"})]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Select your app"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:["Navigate to ",(0,s.jsx)(e.strong,{children:"Monetization"})," \u2192 ",(0,s.jsx)(e.strong,{children:"In-app products"})]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Create products:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"One-time products"}),": Consumable or non-consumable"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Subscriptions"}),": Recurring payments"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Configure product details:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Product ID (used in code)"}),"\n",(0,s.jsx)(e.li,{children:"Name and description"}),"\n",(0,s.jsx)(e.li,{children:"Price"}),"\n",(0,s.jsx)(e.li,{children:"Status (Active)"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"Save and activate products"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"verification",children:"Verification"}),"\n",(0,s.jsx)(e.h3,{id:"initialize-the-plugin",children:"Initialize the Plugin"}),"\n",(0,s.jsx)(e.p,{children:"You have three options for managing IAP instances:"}),"\n",(0,s.jsx)(e.h4,{id:"option-1-create-your-own-instance",children:"Option 1: Create Your Own Instance"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-dart",children:"import 'package:flutter_inapp_purchase/flutter_inapp_purchase.dart';\n\nclass MyApp extends StatefulWidget {\n  @override\n  _MyAppState createState() => _MyAppState();\n}\n\nclass _MyAppState extends State<MyApp> {\n  final FlutterInappPurchase iap = FlutterInappPurchase();\n\n  @override\n  void initState() {\n    super.initState();\n    _initializeIAP();\n  }\n\n  Future<void> _initializeIAP() async {\n    try {\n      await iap.initConnection();\n      print('IAP connection initialized successfully');\n    } catch (e) {\n      print('Failed to initialize IAP connection: $e');\n    }\n  }\n\n  @override\n  void dispose() {\n    iap.endConnection();\n    super.dispose();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return MaterialApp(\n      home: MyHomePage(),\n    );\n  }\n}\n"})}),"\n",(0,s.jsx)(e.h4,{id:"option-2-use-singleton-instance",children:"Option 2: Use Singleton Instance"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-dart",children:"class _MyAppState extends State<MyApp> {\n  final iap = FlutterInappPurchase.instance;\n\n  Future<void> _initializeIAP() async {\n    await iap.initConnection();\n  }\n}\n"})}),"\n",(0,s.jsx)(e.h4,{id:"option-3-with-flutter-hooks",children:"Option 3: With Flutter Hooks"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-dart",children:"class MyWidget extends HookWidget {\n  @override\n  Widget build(BuildContext context) {\n    final iapState = useIAP();\n\n    return Text('Connected: ${iapState.connected}');\n  }\n}\n"})}),"\n",(0,s.jsx)(e.h3,{id:"test-connection",children:"Test Connection"}),"\n",(0,s.jsx)(e.p,{children:"Test your setup with this verification code:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-dart",children:"Future<void> _testConnection() async {\n  final iap = FlutterInappPurchase(); // or FlutterInappPurchase.instance\n  try {\n    final String? result = await iap.initConnection();\n    print('Connection result: $result');\n\n    // Test product fetching\n    final products = await iap.getProducts(['test_product_id']);\n    print('Found ${products.length} products');\n\n  } catch (e) {\n    print('Connection test failed: $e');\n  }\n}\n"})}),"\n",(0,s.jsx)(e.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsx)(e.p,{children:"Now that you have flutter_inapp_purchase installed and configured:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"/guides/basic-setup",children:(0,s.jsx)(e.strong,{children:"Basic Setup Guide"})})," - Learn the fundamentals"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"/getting-started/android-setup",children:(0,s.jsx)(e.strong,{children:"Platform Specific Setup"})})," - Android specific configuration"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"/getting-started/ios-setup",children:(0,s.jsx)(e.strong,{children:"Platform Specific Setup"})})," - iOS specific configuration"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(e.h3,{id:"ios-common-issues",children:"iOS Common Issues"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Permission Denied"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Ensure In-App Purchase capability is enabled"}),"\n",(0,s.jsx)(e.li,{children:"Verify your Apple Developer account has active agreements"}),"\n",(0,s.jsx)(e.li,{children:"Check that products are configured in App Store Connect"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Products Not Loading"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Products must be submitted for review (at least once)"}),"\n",(0,s.jsx)(e.li,{children:"Wait 24 hours after creating products"}),"\n",(0,s.jsx)(e.li,{children:"Verify product IDs match exactly"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"android-common-issues",children:"Android Common Issues"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Billing Unavailable"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Test on a real device (not emulator)"}),"\n",(0,s.jsx)(e.li,{children:"Ensure Google Play is installed and up-to-date"}),"\n",(0,s.jsx)(e.li,{children:"Verify app is signed with the same key as uploaded to Play Console"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Products Not Found"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Products must be active in Play Console"}),"\n",(0,s.jsx)(e.li,{children:"App must be published (at least to internal testing)"}),"\n",(0,s.jsx)(e.li,{children:"Wait 2-3 hours after creating products"}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsxs)(e.p,{children:["Need help? Check our ",(0,s.jsx)(e.a,{href:"/migration/from-v5",children:"migration guide"})," or ",(0,s.jsx)(e.a,{href:"https://github.com/hyochan/flutter_inapp_purchase/issues",children:"open an issue"})," on GitHub."]})]})}function p(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(u,{...n})}):u(n)}},8453:(n,e,i)=>{i.d(e,{R:()=>l,x:()=>o});var t=i(6540);const s={},r=t.createContext(s);function l(n){const e=t.useContext(r);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:l(n.components),t.createElement(r.Provider,{value:e},n.children)}}}]);