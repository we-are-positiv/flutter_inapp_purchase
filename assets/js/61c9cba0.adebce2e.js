"use strict";(self.webpackChunkflutter_inapp_purchase_docs=self.webpackChunkflutter_inapp_purchase_docs||[]).push([[7960],{5741:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>p,frontMatter:()=>l,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"getting-started/setup-ios","title":"iOS Setup","description":"This guide covers the complete setup process for implementing in-app purchases on iOS.","source":"@site/docs/getting-started/setup-ios.md","sourceDirName":"getting-started","slug":"/getting-started/setup-ios","permalink":"/docs/getting-started/setup-ios","draft":false,"unlisted":false,"editUrl":"https://github.com/hyochan/flutter_inapp_purchase/tree/main/docs/docs/getting-started/setup-ios.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2}}');var t=s(4848),r=s(8453);const l={sidebar_position:2},c="iOS Setup",o={},a=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step 1: Configure App Store Connect",id:"step-1-configure-app-store-connect",level:2},{value:"Create In-App Purchase Products",id:"create-in-app-purchase-products",level:3},{value:"Product Types",id:"product-types",level:3},{value:"Product Configuration",id:"product-configuration",level:3},{value:"Step 2: Configure Xcode Project",id:"step-2-configure-xcode-project",level:2},{value:"Enable In-App Purchase Capability",id:"enable-in-app-purchase-capability",level:3},{value:"Configure App Sandbox",id:"configure-app-sandbox",level:3},{value:"Step 3: Set Up Agreements",id:"step-3-set-up-agreements",level:2},{value:"Banking and Tax Information",id:"banking-and-tax-information",level:3},{value:"Step 4: Create Sandbox Test Accounts",id:"step-4-create-sandbox-test-accounts",level:2},{value:"Create Test Users",id:"create-test-users",level:3},{value:"Testing Best Practices",id:"testing-best-practices",level:3},{value:"Step 5: Configure StoreKit Testing (Optional)",id:"step-5-configure-storekit-testing-optional",level:2},{value:"Create StoreKit Configuration File",id:"create-storekit-configuration-file",level:3},{value:"Benefits of StoreKit Testing",id:"benefits-of-storekit-testing",level:3},{value:"Step 6: Handle iOS-Specific Features",id:"step-6-handle-ios-specific-features",level:2},{value:"Promoted In-App Purchases",id:"promoted-in-app-purchases",level:3},{value:"Receipt Validation",id:"receipt-validation",level:3},{value:"Common Issues and Solutions",id:"common-issues-and-solutions",level:2},{value:"Products Not Loading",id:"products-not-loading",level:3},{value:"Sandbox Testing Issues",id:"sandbox-testing-issues",level:3},{value:"Purchase Failures",id:"purchase-failures",level:3},{value:"Testing Checklist",id:"testing-checklist",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"ios-setup",children:"iOS Setup"})}),"\n",(0,t.jsx)(n.p,{children:"This guide covers the complete setup process for implementing in-app purchases on iOS."}),"\n",(0,t.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Apple Developer account"}),"\n",(0,t.jsx)(n.li,{children:"Xcode 12.0 or later"}),"\n",(0,t.jsx)(n.li,{children:"iOS 11.0+ deployment target"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"step-1-configure-app-store-connect",children:"Step 1: Configure App Store Connect"}),"\n",(0,t.jsx)(n.h3,{id:"create-in-app-purchase-products",children:"Create In-App Purchase Products"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Log in to ",(0,t.jsx)(n.a,{href:"https://appstoreconnect.apple.com",children:"App Store Connect"})]}),"\n",(0,t.jsx)(n.li,{children:"Select your app"}),"\n",(0,t.jsxs)(n.li,{children:["Navigate to ",(0,t.jsx)(n.strong,{children:"Features"})," \u2192 ",(0,t.jsx)(n.strong,{children:"In-App Purchases"})]}),"\n",(0,t.jsxs)(n.li,{children:["Click the ",(0,t.jsx)(n.strong,{children:"+"})," button to create a new product"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"product-types",children:"Product Types"}),"\n",(0,t.jsx)(n.p,{children:"Choose the appropriate product type:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Consumable"}),": Can be purchased multiple times (coins, gems, etc.)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Non-Consumable"}),": Purchased once, permanently available (remove ads, unlock features)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Auto-Renewable Subscription"}),": Recurring subscriptions"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Non-Renewing Subscription"}),": Fixed-duration subscriptions"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"product-configuration",children:"Product Configuration"}),"\n",(0,t.jsx)(n.p,{children:"For each product:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Reference Name"}),": Internal name (not visible to users)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Product ID"}),": Unique identifier (e.g., ",(0,t.jsx)(n.code,{children:"com.yourcompany.app.product1"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Pricing"}),": Select price tier"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Localizations"}),": Add display name and description for each language"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"step-2-configure-xcode-project",children:"Step 2: Configure Xcode Project"}),"\n",(0,t.jsx)(n.h3,{id:"enable-in-app-purchase-capability",children:"Enable In-App Purchase Capability"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Open your project in Xcode"}),"\n",(0,t.jsx)(n.li,{children:"Select your app target"}),"\n",(0,t.jsxs)(n.li,{children:["Go to ",(0,t.jsx)(n.strong,{children:"Signing & Capabilities"})," tab"]}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:"+ Capability"})]}),"\n",(0,t.jsxs)(n.li,{children:["Add ",(0,t.jsx)(n.strong,{children:"In-App Purchase"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"configure-app-sandbox",children:"Configure App Sandbox"}),"\n",(0,t.jsx)(n.p,{children:"For testing, ensure your app uses the sandbox environment:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"In Xcode, edit your scheme"}),"\n",(0,t.jsxs)(n.li,{children:["Go to ",(0,t.jsx)(n.strong,{children:"Run"})," \u2192 ",(0,t.jsx)(n.strong,{children:"Options"})]}),"\n",(0,t.jsxs)(n.li,{children:["Set ",(0,t.jsx)(n.strong,{children:"StoreKit Configuration"})," to your ",(0,t.jsx)(n.code,{children:".storekit"})," file (optional)"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"step-3-set-up-agreements",children:"Step 3: Set Up Agreements"}),"\n",(0,t.jsx)(n.h3,{id:"banking-and-tax-information",children:"Banking and Tax Information"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["In App Store Connect, go to ",(0,t.jsx)(n.strong,{children:"Agreements, Tax, and Banking"})]}),"\n",(0,t.jsxs)(n.li,{children:["Complete all required agreements:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Paid Applications Agreement"}),"\n",(0,t.jsx)(n.li,{children:"Banking Information"}),"\n",(0,t.jsx)(n.li,{children:"Tax Information"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"}),": Products won't be available for purchase until agreements are active."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"step-4-create-sandbox-test-accounts",children:"Step 4: Create Sandbox Test Accounts"}),"\n",(0,t.jsx)(n.h3,{id:"create-test-users",children:"Create Test Users"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["In App Store Connect, go to ",(0,t.jsx)(n.strong,{children:"Users and Access"})]}),"\n",(0,t.jsxs)(n.li,{children:["Select ",(0,t.jsx)(n.strong,{children:"Sandbox Testers"})]}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:"+"})," to create new testers"]}),"\n",(0,t.jsxs)(n.li,{children:["Use unique email addresses (can be variations like ",(0,t.jsx)(n.code,{children:"test+1@example.com"}),")"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"testing-best-practices",children:"Testing Best Practices"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Use different sandbox accounts for different test scenarios"}),"\n",(0,t.jsx)(n.li,{children:"Clear purchase history regularly in Settings \u2192 App Store \u2192 Sandbox Account"}),"\n",(0,t.jsx)(n.li,{children:"Test all product types and edge cases"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"step-5-configure-storekit-testing-optional",children:"Step 5: Configure StoreKit Testing (Optional)"}),"\n",(0,t.jsx)(n.h3,{id:"create-storekit-configuration-file",children:"Create StoreKit Configuration File"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["In Xcode, ",(0,t.jsx)(n.strong,{children:"File"})," \u2192 ",(0,t.jsx)(n.strong,{children:"New"})," \u2192 ",(0,t.jsx)(n.strong,{children:"File"})]}),"\n",(0,t.jsxs)(n.li,{children:["Choose ",(0,t.jsx)(n.strong,{children:"StoreKit Configuration File"})]}),"\n",(0,t.jsx)(n.li,{children:"Add your products with the same IDs as App Store Connect"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"benefits-of-storekit-testing",children:"Benefits of StoreKit Testing"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Test without App Store Connect configuration"}),"\n",(0,t.jsx)(n.li,{children:"Simulate various scenarios (failures, delays)"}),"\n",(0,t.jsx)(n.li,{children:"Speed up development cycle"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"step-6-handle-ios-specific-features",children:"Step 6: Handle iOS-Specific Features"}),"\n",(0,t.jsx)(n.h3,{id:"promoted-in-app-purchases",children:"Promoted In-App Purchases"}),"\n",(0,t.jsx)(n.p,{children:"To handle purchases initiated from the App Store:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"// Listen for promoted purchases\nFlutterInappPurchase.instance.getPromotedProduct().then((productId) {\n  if (productId != null) {\n    // Handle promoted purchase\n    handlePromotedPurchase(productId);\n  }\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"receipt-validation",children:"Receipt Validation"}),"\n",(0,t.jsx)(n.p,{children:"iOS provides a unified receipt containing all purchase information:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",children:"// Get app receipt\nString? receiptBody = await FlutterInappPurchase.instance.getReceiptData();\n\n// Validate with your server\nvalidateReceipt(receiptBody);\n"})}),"\n",(0,t.jsx)(n.h2,{id:"common-issues-and-solutions",children:"Common Issues and Solutions"}),"\n",(0,t.jsx)(n.h3,{id:"products-not-loading",children:"Products Not Loading"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Check Product Status"}),': Ensure products are "Ready to Submit" or "Approved"']}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Verify Bundle ID"}),": Must match exactly with App Store Connect"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Wait Time"}),": New products may take up to 24 hours to propagate"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Agreements"}),": Ensure all agreements are active"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"sandbox-testing-issues",children:"Sandbox Testing Issues"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Sign Out"}),": Sign out of production App Store account"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Use Sandbox Account"}),": Only sign in when prompted during purchase"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Clear Cache"}),": Delete and reinstall app between tests"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"purchase-failures",children:"Purchase Failures"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Network Issues"}),": Check internet connectivity"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Parental Controls"}),": Ensure IAP is not restricted"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Payment Methods"}),": Sandbox accounts don't need real payment info"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"testing-checklist",children:"Testing Checklist"}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Products configured in App Store Connect"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","In-App Purchase capability enabled"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Agreements completed and active"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Sandbox test accounts created"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Test all product types"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Test purchase restoration"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Test receipt validation"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Test network error handling"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Test subscription management"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"./setup-android",children:"Learn about Android setup"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"./quickstart",children:"Explore getting started guide"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"../api/error-codes",children:"Understand error codes"})}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>c});var i=s(6540);const t={},r=i.createContext(t);function l(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);