"use strict";(self.webpackChunkflutter_inapp_purchase_docs=self.webpackChunkflutter_inapp_purchase_docs||[]).push([[9013],{7309:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>t,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"troubleshooting","title":"Troubleshooting","description":"Common issues and solutions when implementing in-app purchases with flutterinapppurchase.","source":"@site/docs/troubleshooting.md","sourceDirName":".","slug":"/troubleshooting","permalink":"/docs/troubleshooting","draft":false,"unlisted":false,"editUrl":"https://github.com/hyochan/flutter_inapp_purchase/tree/main/docs/docs/troubleshooting.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8,"title":"Troubleshooting"}}');var r=s(4848),l=s(8453);const t={sidebar_position:8,title:"Troubleshooting"},o="Troubleshooting",c={},d=[{value:"Installation &amp; Setup Issues",id:"installation--setup-issues",level:2},{value:"Package Installation Problems",id:"package-installation-problems",level:3},{value:"iOS Build Issues",id:"ios-build-issues",level:3},{value:"Android Build Issues",id:"android-build-issues",level:3},{value:"Connection &amp; Initialization Issues",id:"connection--initialization-issues",level:2},{value:"&quot;Billing is unavailable&quot; Error",id:"billing-is-unavailable-error",level:3},{value:"iOS Connection Issues",id:"ios-connection-issues",level:3},{value:"Product Loading Issues",id:"product-loading-issues",level:2},{value:"Products Not Loading",id:"products-not-loading",level:3},{value:"iOS Products Not Loading",id:"ios-products-not-loading",level:3},{value:"Android Products Not Loading",id:"android-products-not-loading",level:3},{value:"Purchase Issues",id:"purchase-issues",level:2},{value:"Purchase Flow Not Working",id:"purchase-flow-not-working",level:3},{value:"Transaction Not Completing",id:"transaction-not-completing",level:3},{value:"&quot;Already Owned&quot; Error",id:"already-owned-error",level:3},{value:"Testing Issues",id:"testing-issues",level:2},{value:"Sandbox Testing Problems (iOS)",id:"sandbox-testing-problems-ios",level:3},{value:"Test Purchases Not Working (Android)",id:"test-purchases-not-working-android",level:3},{value:"Runtime Errors",id:"runtime-errors",level:2},{value:"Stream Subscription Errors",id:"stream-subscription-errors",level:3},{value:"Memory Leaks",id:"memory-leaks",level:3},{value:"Receipt Validation Issues",id:"receipt-validation-issues",level:2},{value:"iOS Receipt Validation",id:"ios-receipt-validation",level:3},{value:"Android Receipt Validation",id:"android-receipt-validation",level:3},{value:"Debug Tools",id:"debug-tools",level:2},{value:"Enable Debug Logging",id:"enable-debug-logging",level:3},{value:"Check Connection Status",id:"check-connection-status",level:3},{value:"Getting Help",id:"getting-help",level:2},{value:"Issue Report Template",id:"issue-report-template",level:3}];function a(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"troubleshooting",children:"Troubleshooting"})}),"\n",(0,r.jsx)(e.p,{children:"Common issues and solutions when implementing in-app purchases with flutter_inapp_purchase."}),"\n",(0,r.jsx)(e.h2,{id:"installation--setup-issues",children:"Installation & Setup Issues"}),"\n",(0,r.jsx)(e.h3,{id:"package-installation-problems",children:"Package Installation Problems"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Problem:"})," ",(0,r.jsx)(e.code,{children:"flutter pub get"})," fails with dependency conflicts"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Solution:"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Clear pub cache\nflutter pub cache repair\n\n# Clean project\nflutter clean\nflutter pub get\n\n# For dependency conflicts, try:\nflutter pub deps\nflutter pub upgrade\n"})}),"\n",(0,r.jsx)(e.h3,{id:"ios-build-issues",children:"iOS Build Issues"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Problem:"})," Build fails with StoreKit related errors"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Solution:"})}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Ensure iOS deployment target is 11.0+:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-xml",children:"\x3c!-- ios/Podfile --\x3e\nplatform :ios, '11.0'\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Clean and rebuild:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"cd ios\nrm -rf Pods Podfile.lock\npod install\ncd ..\nflutter clean\nflutter build ios\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"android-build-issues",children:"Android Build Issues"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Problem:"})," Build fails with billing library conflicts"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Solution:"})}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["Check ",(0,r.jsx)(e.code,{children:"android/app/build.gradle"})," minSdkVersion:"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-gradle",children:"defaultConfig {\n    minSdkVersion 21  // Required minimum\n}\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:["Add billing permission to ",(0,r.jsx)(e.code,{children:"AndroidManifest.xml"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-xml",children:'<uses-permission android:name="com.android.vending.BILLING" />\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"connection--initialization-issues",children:"Connection & Initialization Issues"}),"\n",(0,r.jsx)(e.h3,{id:"billing-is-unavailable-error",children:'"Billing is unavailable" Error'}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Problem:"}),' IAP initialization returns "Billing is unavailable"']}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Possible Causes & Solutions:"})}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Google Play Store not installed/updated:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Ensure Google Play Store is installed and updated"}),"\n",(0,r.jsx)(e.li,{children:"Test on real device, not emulator"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"App not uploaded to Play Console:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Upload app to Internal Testing track minimum"}),"\n",(0,r.jsx)(e.li,{children:"Wait for processing (can take several hours)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Package name mismatch:"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-gradle",children:'// Ensure android/app/build.gradle applicationId matches Play Console\ndefaultConfig {\n    applicationId "com.yourcompany.yourapp"\n}\n'})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Developer account issues:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Verify Google Play Developer account is active"}),"\n",(0,r.jsx)(e.li,{children:"Complete merchant agreement"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"ios-connection-issues",children:"iOS Connection Issues"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Problem:"})," Connection fails on iOS"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Solutions:"})}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Sandbox environment:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Test on real device with sandbox account"}),"\n",(0,r.jsx)(e.li,{children:"Don't sign in to sandbox account in Settings"}),"\n",(0,r.jsx)(e.li,{children:"Only sign in when prompted during purchase"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"App Store Connect setup:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:'Verify products are "Ready to Submit"'}),"\n",(0,r.jsx)(e.li,{children:"Complete agreements in ASC"}),"\n",(0,r.jsx)(e.li,{children:"Wait up to 24 hours for product propagation"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"product-loading-issues",children:"Product Loading Issues"}),"\n",(0,r.jsx)(e.h3,{id:"products-not-loading",children:"Products Not Loading"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Problem:"})," ",(0,r.jsx)(e.code,{children:"getProducts()"})," returns empty list"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Debugging Steps:"})}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Verify product IDs:"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-dart",children:"// Enable debug logging\nFlutterInappPurchase.instance.setDebugMode(true);\n\n// Check exact product ID matching\nfinal products = await FlutterInappPurchase.instance\n    .requestProducts(skus: ['exact.product.id.from.store'], type: 'inapp');\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Check store console:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:'iOS: Products "Ready to Submit" in App Store Connect'}),"\n",(0,r.jsx)(e.li,{children:'Android: Products "Active" in Play Console'}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Wait for propagation:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"New products can take 24+ hours to be available"}),"\n",(0,r.jsx)(e.li,{children:"Try with existing, known-working products first"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"ios-products-not-loading",children:"iOS Products Not Loading"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Specific Solutions:"})}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Bundle ID verification:"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Check bundle ID in Xcode matches App Store Connect\nopen ios/Runner.xcworkspace\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Agreements verification:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Check App Store Connect > Agreements, Tax, and Banking"}),"\n",(0,r.jsx)(e.li,{children:"Ensure Paid Applications Agreement is active"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Product status:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:'Products must be "Ready to Submit" or "Approved"'}),"\n",(0,r.jsx)(e.li,{children:"Check in App Store Connect > Features > In-App Purchases"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"android-products-not-loading",children:"Android Products Not Loading"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Specific Solutions:"})}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"App upload requirement:"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Build and upload APK/AAB to Play Console\nflutter build appbundle --release\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Package name verification:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Verify ",(0,r.jsx)(e.code,{children:"applicationId"})," in ",(0,r.jsx)(e.code,{children:"build.gradle"})]}),"\n",(0,r.jsx)(e.li,{children:"Must exactly match Play Console"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"License testing:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Add test accounts in Play Console > Setup > License testing"}),"\n",(0,r.jsx)(e.li,{children:"Use test accounts for testing"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"purchase-issues",children:"Purchase Issues"}),"\n",(0,r.jsx)(e.h3,{id:"purchase-flow-not-working",children:"Purchase Flow Not Working"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Problem:"})," Purchase request doesn't trigger system dialog"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Debugging:"})}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Check initialization:"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-dart",children:"// Ensure IAP is initialized before purchase\nbool initialized = await FlutterInappPurchase.instance.initialize() != null;\nif (!initialized) {\n  print('IAP not initialized');\n  return;\n}\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Verify product exists:"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-dart",children:"final products = await FlutterInappPurchase.instance.requestProducts(skus: [productId], type: 'inapp');\nif (products.isEmpty) {\n  print('Product not found: $productId');\n  return;\n}\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Check purchase listeners:"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-dart",children:"// Ensure listeners are set up before purchase\nFlutterInappPurchase.purchaseUpdated.listen((item) {\n  print('Purchase updated: ${item?.productId}');\n});\n\nFlutterInappPurchase.purchaseError.listen((item) {\n  print('Purchase error: ${item?.productId}');\n});\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"transaction-not-completing",children:"Transaction Not Completing"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Problem:"})," Purchase succeeds but transaction doesn't complete"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Solution:"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-dart",children:"void _handlePurchaseUpdate(PurchasedItem? item) async {\n  if (item == null) return;\n  \n  try {\n    // IMPORTANT: Always complete transactions\n    if (Platform.isIOS) {\n      await FlutterInappPurchase.instance.finishTransaction(item);\n    } else {\n      // Android: Choose based on product type\n      if (isConsumable(item.productId!)) {\n        await FlutterInappPurchase.instance.consumePurchase(\n          purchaseToken: item.purchaseToken!,\n        );\n      } else {\n        await FlutterInappPurchase.instance.acknowledgePurchase(\n          purchaseToken: item.purchaseToken!,\n        );\n      }\n    }\n  } catch (e) {\n    print('Failed to complete transaction: $e');\n  }\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"already-owned-error",children:'"Already Owned" Error'}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Problem:"}),' Getting "already owned" error on Android']}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Solutions:"})}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Consume previous purchases:"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-dart",children:"// For consumable products\nfinal purchases = await FlutterInappPurchase.instance.getAvailablePurchases();\nfor (final purchase in purchases ?? []) {\n  if (isConsumable(purchase.productId!)) {\n    await FlutterInappPurchase.instance.consumePurchase(\n      purchaseToken: purchase.purchaseToken!,\n    );\n  }\n}\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Clear test purchases:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"In Google Play Store app: Menu > Account > Purchase history"}),"\n",(0,r.jsx)(e.li,{children:"Cancel test purchases"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"testing-issues",children:"Testing Issues"}),"\n",(0,r.jsx)(e.h3,{id:"sandbox-testing-problems-ios",children:"Sandbox Testing Problems (iOS)"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Problem:"})," Sandbox purchases not working"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Solutions:"})}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Account management:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Create fresh sandbox accounts in App Store Connect"}),"\n",(0,r.jsx)(e.li,{children:"Don't sign in to sandbox account in Settings > iTunes & App Store"}),"\n",(0,r.jsx)(e.li,{children:"Only sign in when prompted during purchase"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Purchase history:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Clear purchase history: Settings > iTunes & App Store > Sandbox Account"}),"\n",(0,r.jsx)(e.li,{children:"Use different sandbox accounts for different test scenarios"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Network issues:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Test on real device with cellular/different WiFi"}),"\n",(0,r.jsx)(e.li,{children:"Sandbox can be unstable, try multiple times"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"test-purchases-not-working-android",children:"Test Purchases Not Working (Android)"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Problem:"})," Test purchases failing on Android"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Solutions:"})}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"License testers:"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"Play Console > Setup > License testing > License Testers\nAdd Gmail accounts for testing\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Test tracks:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Upload app to Internal Testing minimum"}),"\n",(0,r.jsx)(e.li,{children:"Join testing program with test account"}),"\n",(0,r.jsx)(e.li,{children:"Install from Play Store (not sideload)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Account verification:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Use Gmail account added as license tester"}),"\n",(0,r.jsx)(e.li,{children:"Clear Play Store cache/data if needed"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"runtime-errors",children:"Runtime Errors"}),"\n",(0,r.jsx)(e.h3,{id:"stream-subscription-errors",children:"Stream Subscription Errors"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Problem:"})," Multiple listeners or subscription errors"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Solution:"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-dart",children:"class _MyStoreState extends State<MyStore> {\n  StreamSubscription? _purchaseSubscription;\n  StreamSubscription? _errorSubscription;\n  \n  @override\n  void initState() {\n    super.initState();\n    _setupListeners();\n  }\n  \n  void _setupListeners() {\n    // Cancel existing subscriptions first\n    _purchaseSubscription?.cancel();\n    _errorSubscription?.cancel();\n    \n    _purchaseSubscription = FlutterInappPurchase\n        .purchaseUpdated.listen(_handlePurchase);\n    \n    _errorSubscription = FlutterInappPurchase\n        .purchaseError.listen(_handleError);\n  }\n  \n  @override\n  void dispose() {\n    _purchaseSubscription?.cancel();\n    _errorSubscription?.cancel();\n    super.dispose();\n  }\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"memory-leaks",children:"Memory Leaks"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Problem:"})," App crashes or memory issues"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Solution:"})," Always clean up resources:"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-dart",children:"@override\nvoid dispose() {\n  // Cancel all subscriptions\n  _purchaseUpdatedSubscription?.cancel();\n  _purchaseErrorSubscription?.cancel();\n  \n  // End IAP connection if needed\n  FlutterInappPurchase.instance.endConnection();\n  \n  super.dispose();\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"receipt-validation-issues",children:"Receipt Validation Issues"}),"\n",(0,r.jsx)(e.h3,{id:"ios-receipt-validation",children:"iOS Receipt Validation"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Problem:"})," Receipt validation fails"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Solutions:"})}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Receipt data retrieval:"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-dart",children:"String? receiptData = await FlutterInappPurchase.instance.getReceiptData();\nif (receiptData == null) {\n  print('No receipt data available');\n  return;\n}\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Server validation:"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Use production URL for live app: ",(0,r.jsx)(e.code,{children:"https://buy.itunes.apple.com/verifyReceipt"})]}),"\n",(0,r.jsxs)(e.li,{children:["Use sandbox URL for testing: ",(0,r.jsx)(e.code,{children:"https://sandbox.itunes.apple.com/verifyReceipt"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"android-receipt-validation",children:"Android Receipt Validation"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Problem:"})," Purchase token validation fails"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Solution:"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-dart",children:"// Use Google Play Developer API for server-side validation\n// Send purchase token to your server for verification\nfinal purchaseToken = item.purchaseToken;\nawait validatePurchaseOnServer(purchaseToken, item.productId);\n"})}),"\n",(0,r.jsx)(e.h2,{id:"debug-tools",children:"Debug Tools"}),"\n",(0,r.jsx)(e.h3,{id:"enable-debug-logging",children:"Enable Debug Logging"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-dart",children:"// Add this for debugging\nFlutterInappPurchase.instance.setDebugMode(true);\n"})}),"\n",(0,r.jsx)(e.h3,{id:"check-connection-status",children:"Check Connection Status"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-dart",children:"Future<void> debugConnection() async {\n  try {\n    final result = await FlutterInappPurchase.instance.initialize();\n    print('Connection result: $result');\n    \n    // Test with known product\n    final products = await FlutterInappPurchase.instance\n        .requestProducts(skus: ['android.test.purchased'], type: 'inapp'); // Android test product\n    print('Test products: ${products.length}');\n  } catch (e) {\n    print('Debug error: $e');\n  }\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"getting-help",children:"Getting Help"}),"\n",(0,r.jsx)(e.p,{children:"If you're still experiencing issues:"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Check logs:"})," Enable debug mode and check console logs"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Minimal reproduction:"})," Create minimal example that reproduces issue"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Platform testing:"})," Test on both iOS and Android"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"Version check:"})," Ensure you're using latest plugin version"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"GitHub Issues:"})," ",(0,r.jsx)(e.a,{href:"https://github.com/hyochan/flutter_inapp_purchase/issues",children:"Report bugs"})," with detailed information"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"issue-report-template",children:"Issue Report Template"}),"\n",(0,r.jsx)(e.p,{children:"When reporting issues, include:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"**Platform:** iOS/Android/Both\n**Plugin Version:** flutter_inapp_purchase x.x.x\n**Flutter Version:** flutter --version output\n**Device:** Real device/Simulator/Emulator\n\n**Issue Description:**\nClear description of the problem\n\n**Steps to Reproduce:**\n1. Step one\n2. Step two\n3. Step three\n\n**Expected Behavior:**\nWhat should happen\n\n**Actual Behavior:**\nWhat actually happens\n\n**Logs:**\n"})}),"\n",(0,r.jsx)(e.p,{children:"Relevant console output"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"\n**Sample Code:**\n```dart\nMinimal code that reproduces the issue\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"\nThis comprehensive troubleshooting guide should help developers resolve most common issues with flutter_inapp_purchase.\n"})})]})}function u(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(a,{...n})}):a(n)}},8453:(n,e,s)=>{s.d(e,{R:()=>t,x:()=>o});var i=s(6540);const r={},l=i.createContext(r);function t(n){const e=i.useContext(l);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:t(n.components),i.createElement(l.Provider,{value:e},n.children)}}}]);